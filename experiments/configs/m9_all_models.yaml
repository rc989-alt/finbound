# M9 Experiment Configuration - All Models
# ============================================
# M9 improvements:
# - Enhanced verification using gpt-4o for complex calculations
# - Formula templates for common financial calculations
# - Answer type detection and enforcement
# - Structured calculation trace logging
# - Better keyword detection for calculation types

experiment:
  name: "m9_all_models"
  description: "M9 run with enhanced calculation verification"

# Datasets with reduced sample limits for faster iteration
datasets:
  finqa:
    path: "data/raw/FinQA/dataset"
    splits: ["dev"]
    sample_limit: 50
  tatqa:
    path: "data/raw/TAT-QA/dataset_raw"
    splits: ["dev"]
    sample_limit: 50

# Focus on F1 (Ground-Truth Reasoning) for initial validation
task_families:
  - F1

# Methods to compare
methods:
  finbound:
    type: "finbound"
    model: "gpt-4o"
    max_retries: 1
    description: "FinBound with M9 enhanced verification"

  gpt4_zeroshot:
    type: "gpt4_zeroshot"
    model: "gpt-4o"
    description: "GPT-4 zero-shot baseline"

  deepseek_zeroshot:
    type: "deepseek_zeroshot"
    model: "deepseek-chat"
    description: "DeepSeek zero-shot baseline"

  claude_zeroshot:
    type: "claude_zeroshot"
    model: "claude-sonnet-4-20250514"
    description: "Claude Sonnet zero-shot baseline"

  rag_no_verify:
    type: "rag_no_verify"
    model: "gpt-4o"
    description: "RAG without verification gates"

# Metrics to compute
metrics:
  primary:
    - accuracy
    - grounding_accuracy
    - hallucination_rate

  secondary:
    - latency_ms
    - verification_rate

  research:
    - transparency_score
    - auditability

# Reproducibility settings
reproducibility:
  temperature: 0.0
  seed: 42
  log_raw_outputs: true

# Rate limiting
rate_limit:
  requests_per_minute: 30
  retry_delay_seconds: 2
  max_retries: 3

# Output configuration
output:
  results_dir: "experiments/results"
  save_individual_results: true
  save_aggregate_metrics: true
